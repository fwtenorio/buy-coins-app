(function(){"use strict";var t={6157:function(t,o,e){var n=e(5130),a=e(6768);const s={key:0,id:"app"},i={key:1};function r(t,o,e,n,r,l){const u=(0,a.g2)("PageLogin"),c=(0,a.g2)("PageHeader"),d=(0,a.g2)("PageTransactionsCreate"),h=(0,a.g2)("PageTransactions");return l.shouldRenderApp?((0,a.uX)(),(0,a.CE)("div",s,[(0,a.bF)(u)])):((0,a.uX)(),(0,a.CE)("div",i,[(0,a.bF)(c),(0,a.bF)(d),(0,a.bF)(h)]))}const l={class:"container"},u=(0,a.Lk)("header",null,[(0,a.Lk)("h1",{class:"mb-0"},"COMPRA DE MOEDAS")],-1),c={class:"mt-4 mb-3"};function d(t,o,e,n,s,i){return(0,a.uX)(),(0,a.CE)("div",l,[u,(0,a.Lk)("nav",c,[(0,a.Lk)("a",{href:"#",onClick:o[0]||(o[0]=(...t)=>i.logout&&i.logout(...t)),class:"btn btn-outline-primary mr-1"},"SAIR")])])}var h={name:"PageHeader",methods:{logout(){sessionStorage.removeItem("token"),window.location.reload()}}},p=e(1241);const m=(0,p.A)(h,[["render",d]]);var b=m,k=e(4232);const L=t=>((0,a.Qi)("data-v-ee6be960"),t=t(),(0,a.jt)(),t),g={class:"container"},f=L((()=>(0,a.Lk)("h3",{class:"mt-2 mb-3 float-left text-primary"},"Transações",-1))),y={class:"table table-striped"},v=L((()=>(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",{scope:"col"},"#"),(0,a.Lk)("th",{scope:"col"},"MOEDA"),(0,a.Lk)("th",{scope:"col"},"VALOR DE COMPRA"),(0,a.Lk)("th",{scope:"col"},"TAXA"),(0,a.Lk)("th",{scope:"col"},"VALOR TOTAL PAGO"),(0,a.Lk)("th",{scope:"col"},"DATA/HORA")])],-1))),C={scope:"row"};function A(t,o,e,n,s,i){return(0,a.uX)(),(0,a.CE)("div",g,[f,(0,a.Lk)("table",y,[v,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.transactions,((t,o)=>((0,a.uX)(),(0,a.CE)("tr",{key:t.name,class:"m-5"},[(0,a.Lk)("th",C,(0,k.v_)(o+1),1),(0,a.Lk)("td",null,(0,k.v_)(t.coinName),1),(0,a.Lk)("td",null,(0,k.v_)(t.coinName)+" "+(0,k.v_)(t.amount),1),(0,a.Lk)("td",null,"R$ "+(0,k.v_)(t.rateBrl),1),(0,a.Lk)("td",null,"R$ "+(0,k.v_)(t.totalPaidBrl),1),(0,a.Lk)("td",null,(0,k.v_)(t.createAt),1)])))),128))])])])}var w={name:"TransactionsTable",data(){return{transactions:[],token:sessionStorage.getItem("token")}},mounted(){this.fetchTransactions()},methods:{async fetchTransactions(){try{const t=await fetch("http://localhost:8000/api/transactions",{method:"GET",headers:{Authorization:this.token}});if(t.ok){const o=await t.json();this.transactions=o.data}else console.error("Erro na requisição:",t.status)}catch(t){console.error("Erro:",t.message)}}},computed:{}};const T=(0,p.A)(w,[["render",A],["__scopeId","data-v-ee6be960"]]);var E=T;const O={class:"container"},P=(0,a.Lk)("b",null,"Nova Transação",-1),B=[P],R={class:"user-modal"},S=(0,a.Lk)("h3",{class:"text-primary"},"COMPRAR MOEDA",-1),M=(0,a.Lk)("br",null,null,-1),D={class:"form-group"},U=(0,a.Lk)("label",{for:"quantity"},"Quantidade que deseja comprar (mínino: 50,00)",-1),x={class:"form-group"},X=(0,a.Lk)("label",{for:"name"},"Selecione a moeda de compra",-1),j=["disabled"],_=(0,a.Lk)("option",{value:"",disabled:"",selected:""},"Selecione uma moeda",-1),I=["value"],V={key:0,class:"form-group"},$=(0,a.Lk)("label",{for:"totalToPay"},"Valor total a pagar (incluindo taxa de serviço)",-1),z={key:1,class:"form-group"},F=(0,a.Lk)("label",{for:"totalToPay"},"Você estará comprando:",-1),J=(0,a.Lk)("br",null,null,-1),N=(0,a.Lk)("br",null,null,-1),q=["disabled"];function G(t,o,e,s,i,r){return(0,a.uX)(),(0,a.CE)("div",O,[(0,a.Lk)("button",{onClick:o[0]||(o[0]=t=>i.showModal=!i.showModal),class:"btn btn-primary mr-1 float-right"},B),(0,a.Lk)("div",{class:(0,k.C4)([r.modalClass,"modal-container"])},[(0,a.Lk)("div",R,[S,M,(0,a.Lk)("form",{onSubmit:o[8]||(o[8]=(0,n.D$)(((...t)=>r.sendBuy&&r.sendBuy(...t)),["prevent"]))},[(0,a.Lk)("div",D,[U,(0,a.bo)((0,a.Lk)("input",{required:"","onUpdate:modelValue":o[1]||(o[1]=t=>i.inputAmount=t),onClick:o[2]||(o[2]=(...t)=>r.handleClickAmount&&r.handleClickAmount(...t)),type:"text",id:"amount",class:"form-control",placeholder:"R$ 0,00"},null,512),[[n.Jo,i.inputAmount]])]),(0,a.Lk)("div",x,[X,(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":o[3]||(o[3]=t=>i.selectedCoin=t),onChange:o[4]||(o[4]=(...t)=>r.fetchCoinData&&r.fetchCoinData(...t)),disabled:i.inputAmount<50},[_,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.coins,(t=>((0,a.uX)(),(0,a.CE)("option",{key:t.name,value:t.code},(0,k.v_)(t.name),9,I)))),128))],40,j),[[n.u1,i.selectedCoin]])]),i.showTotalToPay?((0,a.uX)(),(0,a.CE)("div",V,[$,(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":o[5]||(o[5]=t=>i.totalToPay=t),class:"form-control",disabled:""},null,512),[[n.Jo,i.totalToPay]])])):(0,a.Q3)("",!0),i.showTotalToBuy?((0,a.uX)(),(0,a.CE)("div",z,[F,(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":o[6]||(o[6]=t=>i.totalToBuy=t),class:"form-control",disabled:""},null,512),[[n.Jo,i.totalToBuy]])])):(0,a.Q3)("",!0),J,N,(0,a.Lk)("div",null,[(0,a.Lk)("button",{onClick:o[7]||(o[7]=(0,n.D$)((t=>i.showModal=!i.showModal),["prevent"])),class:"btn btn-secondary mr-1 mb-2"},"CANCELAR"),(0,a.Lk)("button",{disabled:""!=i.inputAmount&&parseFloat(i.inputAmount)<50||!i.btnBuyActive,class:"btn btn-primary mr-1 mb-2"},[(0,a.Lk)("b",null,(0,k.v_)(i.btnBuyLabel),1)],8,q)])],32)])],2)])}var Q={name:"UserRegisterForm",data(){return{users:[],coins:[],selectedCoin:"",inputAmount:"",totalToPay:"",totalToBuy:"",showModal:!1,showTotalToPay:!1,showTotalToBuy:!1,btnBuyActive:!1,btnBuyLabel:"COMPRAR!",token:sessionStorage.getItem("token")}},mounted(){this.fetchListCoin()},methods:{handleClickAmount(){this.isLoading=!0,this.selectedCoin="",this.btnBuyActive=!1,this.totalToPay="",this.totalToBuy=""},async fetchListCoin(){try{const t=await fetch("http://localhost:8000/api/coins",{method:"GET",headers:{Authorization:this.token}});if(t.ok){const o=await t.json();this.coins=o.data}else console.error("Erro na requisição:",t.status)}catch(t){console.error("Erro:",t.message)}},async fetchCoinData(){try{if(""!==this.inputAmount){this.btnBuyLabel="CARREGANDO...";const t=await fetch("http://localhost:8000/api/coins/price-rate",{method:"POST",headers:{"Content-type":"application/json",Authorization:this.token},body:JSON.stringify({amount:this.inputAmount,coin:this.selectedCoin})});if(t.ok){const o=await t.json();this.showTotalToPay=!0,this.showTotalToBuy=!0,this.totalToPay=`BRL ${o.data.totalPayWithRate}`,this.totalToBuy=`${o.data.shortName} ${o.data.totalBuy}`,this.btnBuyLabel="COMPRAR!",this.btnBuyActive=!0}else this.totalToPay="",this.totalToBuy="",this.btnBuyActive=!1}}catch(t){console.error("Erro:",t.message)}},async sendBuy(){try{this.btnBuyLabel="AGUARDE...",this.btnBuyActive=!1;const t=await fetch("http://localhost:8000/api/transactions",{method:"POST",headers:{"Content-type":"application/json",Authorization:this.token},body:JSON.stringify({amount:this.inputAmount,coin:this.selectedCoin})});t.ok?window.location.reload():console.error("Erro na requisição:",t.status)}catch(t){console.error("Erro:",t.message)}}},computed:{modalClass(){return this.showModal?"show":""}}};const H=(0,p.A)(Q,[["render",G]]);var W=H;const K={class:"login-container"},Y={class:"login-form"},Z=(0,a.Lk)("p",{style:{"font-size":"20px !important"}},[(0,a.Lk)("b",null,"COMPRA DE MOEDAS")],-1),tt=(0,a.Lk)("br",null,null,-1),ot={class:"form-group"},et=(0,a.Lk)("label",{for:"email"},[(0,a.Lk)("b",null,"Email:")],-1),nt={class:"form-group"},at=(0,a.Lk)("label",{for:"password"},[(0,a.Lk)("b",null,"Password:")],-1),st={key:0,class:"error-alert"},it={style:{"font-size":"12px !important"}},rt={key:1,class:"create-account-link"},lt={style:{"font-size":"14px","padding-top":"3px"}},ut=(0,a.Lk)("b",null,"Criar conta",-1),ct=[ut],dt={key:2},ht={style:{"font-size":"14px","padding-top":"3px"}},pt=(0,a.Lk)("b",null,"Logar",-1),mt=[pt],bt=(0,a.Lk)("br",null,null,-1),kt=["disabled"];function Lt(t,o,e,s,i,r){return(0,a.uX)(),(0,a.CE)("div",K,[(0,a.Lk)("div",Y,[Z,tt,(0,a.Lk)("form",{onSubmit:o[6]||(o[6]=(0,n.D$)(((...t)=>r.loginOrCreateUser&&r.loginOrCreateUser(...t)),["prevent"]))},[(0,a.Lk)("div",ot,[et,(0,a.bo)((0,a.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":o[0]||(o[0]=t=>i.email=t),name:"email",required:"",onClick:o[1]||(o[1]=(...t)=>r.hideError&&r.hideError(...t))},null,512),[[n.Jo,i.email]])]),(0,a.Lk)("div",nt,[at,(0,a.bo)((0,a.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":o[2]||(o[2]=t=>i.password=t),minlength:"5",required:"",onClick:o[3]||(o[3]=(...t)=>r.hideError&&r.hideError(...t))},null,512),[[n.Jo,i.password]])]),i.showMessageLabel?((0,a.uX)(),(0,a.CE)("div",st,[(0,a.Lk)("p",it,[(0,a.Lk)("b",null,(0,k.v_)(i.messageLabel),1)])])):(0,a.Q3)("",!0),i.showSignUp?((0,a.uX)(),(0,a.CE)("div",rt,[(0,a.Lk)("p",lt,[(0,a.eW)("Ainda não tem uma conta? "),(0,a.Lk)("a",{href:"#",onClick:o[4]||(o[4]=(...t)=>r.signUp&&r.signUp(...t))},ct)])])):((0,a.uX)(),(0,a.CE)("div",dt,[(0,a.Lk)("p",ht,[(0,a.eW)("Já tem sua conta? "),(0,a.Lk)("a",{href:"#",onClick:o[5]||(o[5]=(...t)=>r.signIn&&r.signIn(...t))},mt)])])),bt,(0,a.Lk)("button",{type:"submit",disabled:i.isDisabled,class:(0,k.C4)({"inactive-button":i.isDisabled})},[(0,a.Lk)("b",null,(0,k.v_)(i.buttonLabel),1)],10,kt)],32)])])}var gt={data(){return{email:"",password:"",showMessageLabel:!1,showSignUp:!0,buttonLabel:"Login",messageLabel:"",isLogin:!0,isDisabled:!1}},methods:{hideError:function(){this.showMessageLabel=!1},signUp(){this.buttonLabel="Registrar",this.showSignUp=!1,this.isLogin=!1},signIn(){this.buttonLabel="Logar",this.showSignUp=!0,this.isLogin=!0},async loginOrCreateUser(){try{this.isDisabled=!0;let t="";t=this.isLogin?"sign-in":"sign-up";const o=await fetch(`http://localhost:8000/api/${t}`,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({email:this.email,password:this.password})}),e=await o.json();o.ok?this.isLogin?(sessionStorage.setItem("token",e.data),window.location.reload()):(this.signIn(),this.showMessageLabel=!0,this.messageLabel="Cadastro realizado com sucesso!"):(this.showMessageLabel=!0,this.messageLabel=e.message),this.isDisabled=!1}catch(t){console.error(t)}}}};const ft=(0,p.A)(gt,[["render",Lt]]);var yt=ft,vt={name:"App",components:{PageHeader:b,PageTransactionsCreate:W,PageTransactions:E,PageLogin:yt},data(){return{isLoggedUser:!1}},computed:{shouldRenderApp(){return!sessionStorage.getItem("token")}},mounted(){const t=sessionStorage.getItem("token");t&&(this.isLoggedUser=!0)},methods:{}};const Ct=(0,p.A)(vt,[["render",r]]);var At=Ct;(0,n.Ef)(At).mount("#app")}},o={};function e(n){var a=o[n];if(void 0!==a)return a.exports;var s=o[n]={exports:{}};return t[n].call(s.exports,s,s.exports,e),s.exports}e.m=t,function(){var t=[];e.O=function(o,n,a,s){if(!n){var i=1/0;for(c=0;c<t.length;c++){n=t[c][0],a=t[c][1],s=t[c][2];for(var r=!0,l=0;l<n.length;l++)(!1&s||i>=s)&&Object.keys(e.O).every((function(t){return e.O[t](n[l])}))?n.splice(l--,1):(r=!1,s<i&&(i=s));if(r){t.splice(c--,1);var u=a();void 0!==u&&(o=u)}}return o}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[n,a,s]}}(),function(){e.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(o,{a:o}),o}}(),function(){e.d=function(t,o){for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)}}(),function(){var t={524:0};e.O.j=function(o){return 0===t[o]};var o=function(o,n){var a,s,i=n[0],r=n[1],l=n[2],u=0;if(i.some((function(o){return 0!==t[o]}))){for(a in r)e.o(r,a)&&(e.m[a]=r[a]);if(l)var c=l(e)}for(o&&o(n);u<i.length;u++)s=i[u],e.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return e.O(c)},n=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))}();var n=e.O(void 0,[504],(function(){return e(6157)}));n=e.O(n)})();
//# sourceMappingURL=app.80f297a9.js.map