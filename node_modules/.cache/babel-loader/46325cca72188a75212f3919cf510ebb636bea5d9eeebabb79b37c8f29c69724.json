{"ast":null,"code":"export default {\n  data() {\n    return {\n      email: '',\n      password: '',\n      showMessageLabel: false,\n      showSignUp: true,\n      buttonLabel: 'Login',\n      messageLabel: '',\n      isLogin: true,\n      isDisabled: true\n    };\n  },\n  methods: {\n    hideError: function () {\n      if (this.showSignUp) {\n        this.showMessageLabel = false;\n      }\n    },\n    signUp() {\n      this.buttonLabel = 'Registrar';\n      this.showSignUp = false;\n      this.isLogin = false;\n    },\n    signIn() {\n      this.buttonLabel = 'Logar';\n      this.showSignUp = true;\n      this.isLogin = true;\n    },\n    async loginOrCreateUser() {\n      try {\n        console.log('xxxx');\n        this.isDisabled = true;\n        let url = '';\n        if (this.isLogin) {\n          url = 'sign-in';\n        } else {\n          url = 'sign-up';\n        }\n        const response = await fetch(`http://localhost:8000/api/${url}`, {\n          method: 'POST',\n          headers: {\n            'Content-type': 'application/json'\n          },\n          body: JSON.stringify({\n            email: this.email,\n            password: this.password\n          })\n        });\n        const data = await response.json();\n        if (response.ok) {\n          if (this.isLogin) {\n            sessionStorage.setItem('token', data.data);\n            window.location.reload();\n          } else {\n            this.signIn();\n            this.showMessageLabel = true;\n            this.messageLabel = 'Cadastro realizado com sucesso!';\n            this.isDisabled = false;\n          }\n        } else {\n          this.showMessageLabel = true;\n          this.messageLabel = data.message;\n        }\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["data","email","password","showMessageLabel","showSignUp","buttonLabel","messageLabel","isLogin","isDisabled","methods","hideError","signUp","signIn","loginOrCreateUser","console","log","url","response","fetch","method","headers","body","JSON","stringify","json","ok","sessionStorage","setItem","window","location","reload","message","error"],"sources":["/app/src/components/PageLogin.vue"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <div class=\"login-form\">\n      <p style=\"font-size:20px !important\"><b>COMPRA DE MOEDAS</b></p>\n      <br>\n      <form @submit.prevent=\"loginOrCreateUser\">\n        <div class=\"form-group\">\n          <label for=\"email\"><b>Email:</b></label>\n          <input type=\"email\" id=\"email\" v-model=\"email\" name=\"email\" required @click=\"hideError\">\n        </div>\n        <div class=\"form-group\">\n          <label for=\"password\"><b>Password:</b></label>\n          <input type=\"password\" id=\"password\" v-model=\"password\" minlength=\"5\" required @click=\"hideError\">\n        </div>\n        <div class=\"error-alert\" v-if=\"showMessageLabel\">\n          <p style=\"font-size:12px !important\"><b>{{ messageLabel }}</b></p>\n        </div>\n        <div class=\"create-account-link\" v-if=\"showSignUp\">\n          <p style=\"font-size: 14px;padding-top: 3px;\">Ainda não tem uma conta? <a href=\"#\" @click=\"signUp\"><b>Criar conta</b></a></p>\n        </div>\n        <div v-else>\n          <p style=\"font-size: 14px;padding-top: 3px;\">Já tem sua conta? <a href=\"#\" @click=\"signIn\"><b>Logar</b></a></p>\n        </div>\n        <br>\n        <button type=\"submit\" :disabled=\"isDisabled\" class=\"disabled-button\"><b>x{{ buttonLabel }}</b></button>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      email: '',\n      password: '',\n      showMessageLabel: false,\n      showSignUp: true,\n      buttonLabel: 'Login',\n      messageLabel: '',\n      isLogin: true,\n      isDisabled: true\n    };\n  },\n  methods: {\n    hideError: function() {\n      if (this.showSignUp) {\n        this.showMessageLabel = false; \n      }\n    },\n    signUp() {\n      this.buttonLabel = 'Registrar';\n      this.showSignUp = false;\n      this.isLogin = false;\n    },\n    signIn() {\n      this.buttonLabel = 'Logar';\n      this.showSignUp = true;\n      this.isLogin = true;\n    },\n    async loginOrCreateUser() {\n      try {\n        console.log('xxxx')\n          this.isDisabled = true;\n          let url = '';\n          if (this.isLogin) {\n            url = 'sign-in'\n          } else {\n            url = 'sign-up'\n          }\n          const response = await fetch(`http://localhost:8000/api/${url}`, {\n            method: 'POST',\n            headers: {\n              'Content-type': 'application/json'\n            },\n            body: JSON.stringify({\n              email: this.email,\n              password: this.password\n            })\n          });\n          const data = await response.json();\n          if (response.ok) {\n            if (this.isLogin) {\n              sessionStorage.setItem('token', data.data);\n              window.location.reload();\n            } else {\n              this.signIn()\n              this.showMessageLabel = true;\n              this.messageLabel = 'Cadastro realizado com sucesso!';\n              this.isDisabled = false;\n            }\n          } else {\n            this.showMessageLabel = true;\n            this.messageLabel = data.message;\n          }\n        } catch (error) {\n          console.error(error);\n        }\n    }\n  }\n};\n</script>\n\n<style>\n  body {\n    margin: 0;\n    padding: 0;\n    background-color: rgba(255, 255, 255, 0.5);\n    background-image: url(\"../assets/bg_app.jpg\");\n    background-size: cover;\n    background-position: center;\n  }\n  .login-form {\n    background-color: #fff;\n  }\n  .login-container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 80vh;\n  }\n  .error-alert {\n    background-color: #f8d7da;\n    color: #721c24;\n    padding: 10px;\n    border: 1px solid #f5c6cb;\n    border-radius: 5px;\n    text-align: center;\n  }\n  .error-alert p {\n    font-size: 14px;\n    margin: 0;\n  }\n  .login-form {\n    width: 300px;\n    padding: 20px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n  }\n  .login-form p {\n    font-size: 21px;\n    margin: 0;\n    text-align: center;\n  }\n  .form-group {\n    margin-bottom: 15px;\n  }\n  label {\n    display: block;\n    margin-bottom: 5px;\n  }\n  input[type=\"email\"],\n  input[type=\"password\"] {\n    width: 100%;\n    padding: 8px;\n    border: 1px solid #ccc;\n    border-radius: 3px;\n  }\n  button {\n    width: 100%;\n    padding: 10px;\n    background-color: #007bff;\n    color: #fff;\n    border: none;\n    border-radius: 3px;\n    cursor: pointer;\n  }\n  button:hover {\n    background-color: #0056b3;\n  }\n  button.disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    pointer-events: none;\n}\n</style>\n"],"mappings":"AA+BA,eAAe;EACbA,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,QAAQ,EAAE,EAAE;MACZC,gBAAgB,EAAE,KAAK;MACvBC,UAAU,EAAE,IAAI;MAChBC,WAAW,EAAE,OAAO;MACpBC,YAAY,EAAE,EAAE;MAChBC,OAAO,EAAE,IAAI;MACbC,UAAU,EAAE;IACd,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPC,SAAS,EAAE,SAAAA,CAAA,EAAW;MACpB,IAAI,IAAI,CAACN,UAAU,EAAE;QACnB,IAAI,CAACD,gBAAe,GAAI,KAAK;MAC/B;IACF,CAAC;IACDQ,MAAMA,CAAA,EAAG;MACP,IAAI,CAACN,WAAU,GAAI,WAAW;MAC9B,IAAI,CAACD,UAAS,GAAI,KAAK;MACvB,IAAI,CAACG,OAAM,GAAI,KAAK;IACtB,CAAC;IACDK,MAAMA,CAAA,EAAG;MACP,IAAI,CAACP,WAAU,GAAI,OAAO;MAC1B,IAAI,CAACD,UAAS,GAAI,IAAI;MACtB,IAAI,CAACG,OAAM,GAAI,IAAI;IACrB,CAAC;IACD,MAAMM,iBAAiBA,CAAA,EAAG;MACxB,IAAI;QACFC,OAAO,CAACC,GAAG,CAAC,MAAM;QAChB,IAAI,CAACP,UAAS,GAAI,IAAI;QACtB,IAAIQ,GAAE,GAAI,EAAE;QACZ,IAAI,IAAI,CAACT,OAAO,EAAE;UAChBS,GAAE,GAAI,SAAQ;QAChB,OAAO;UACLA,GAAE,GAAI,SAAQ;QAChB;QACA,MAAMC,QAAO,GAAI,MAAMC,KAAK,CAAE,6BAA4BF,GAAI,EAAC,EAAE;UAC/DG,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YACP,cAAc,EAAE;UAClB,CAAC;UACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YACnBtB,KAAK,EAAE,IAAI,CAACA,KAAK;YACjBC,QAAQ,EAAE,IAAI,CAACA;UACjB,CAAC;QACH,CAAC,CAAC;QACF,MAAMF,IAAG,GAAI,MAAMiB,QAAQ,CAACO,IAAI,CAAC,CAAC;QAClC,IAAIP,QAAQ,CAACQ,EAAE,EAAE;UACf,IAAI,IAAI,CAAClB,OAAO,EAAE;YAChBmB,cAAc,CAACC,OAAO,CAAC,OAAO,EAAE3B,IAAI,CAACA,IAAI,CAAC;YAC1C4B,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC;UAC1B,OAAO;YACL,IAAI,CAAClB,MAAM,CAAC;YACZ,IAAI,CAACT,gBAAe,GAAI,IAAI;YAC5B,IAAI,CAACG,YAAW,GAAI,iCAAiC;YACrD,IAAI,CAACE,UAAS,GAAI,KAAK;UACzB;QACF,OAAO;UACL,IAAI,CAACL,gBAAe,GAAI,IAAI;UAC5B,IAAI,CAACG,YAAW,GAAIN,IAAI,CAAC+B,OAAO;QAClC;MACF,EAAE,OAAOC,KAAK,EAAE;QACdlB,OAAO,CAACkB,KAAK,CAACA,KAAK,CAAC;MACtB;IACJ;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}