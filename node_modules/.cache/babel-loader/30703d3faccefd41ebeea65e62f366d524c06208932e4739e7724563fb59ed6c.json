{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"b\", null, \"Nova Transação\", -1 /* HOISTED */);\nconst _hoisted_3 = [_hoisted_2];\nconst _hoisted_4 = {\n  class: \"user-modal\"\n};\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"h3\", {\n  class: \"text-primary\"\n}, \"COMPRAR MOEDA\", -1 /* HOISTED */);\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_7 = {\n  class: \"form-group\"\n};\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"quantity\"\n}, \"Quantidade que deseja comprar (mínino: 50,00)\", -1 /* HOISTED */);\nconst _hoisted_9 = {\n  class: \"form-group\"\n};\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"name\"\n}, \"Selecione a moeda de compra\", -1 /* HOISTED */);\nconst _hoisted_11 = [\"disabled\"];\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\",\n  disabled: \"\",\n  selected: \"\"\n}, \"Selecione uma moeda\", -1 /* HOISTED */);\nconst _hoisted_13 = [\"value\"];\nconst _hoisted_14 = {\n  key: 0,\n  class: \"form-group\"\n};\nconst _hoisted_15 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"totalToPay\"\n}, \"Valor total a pagar (incluindo taxa de serviço)\", -1 /* HOISTED */);\nconst _hoisted_16 = {\n  key: 1,\n  class: \"form-group\"\n};\nconst _hoisted_17 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"totalToPay\"\n}, \"Você estará comprando:\", -1 /* HOISTED */);\nconst _hoisted_18 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_19 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_20 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = $event => $data.showModal = !$data.showModal),\n    class: \"btn btn-primary mr-1 float-right\"\n  }, [..._hoisted_3]), _createElementVNode(\"div\", {\n    class: _normalizeClass([$options.modalClass, \"modal-container\"])\n  }, [_createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _hoisted_6, _createElementVNode(\"form\", {\n    onSubmit: _cache[8] || (_cache[8] = _withModifiers((...args) => $options.sendBuy && $options.sendBuy(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _withDirectives(_createElementVNode(\"input\", {\n    required: \"\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.inputAmount = $event),\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.handleClickAmount && $options.handleClickAmount(...args)),\n    type: \"text\",\n    id: \"amount\",\n    class: \"form-control\",\n    placeholder: \"R$ 0,00\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.inputAmount]])]), _createElementVNode(\"div\", _hoisted_9, [_hoisted_10, _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.selectedCoin = $event),\n    onChange: _cache[4] || (_cache[4] = (...args) => $options.fetchCoinData && $options.fetchCoinData(...args)),\n    disabled: $data.inputAmount < 50\n  }, [_hoisted_12, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.coins, coin => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: coin.name,\n      value: coin.code\n    }, _toDisplayString(coin.name), 9 /* TEXT, PROPS */, _hoisted_13);\n  }), 128 /* KEYED_FRAGMENT */))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_11), [[_vModelSelect, $data.selectedCoin]])]), $data.showTotalToPay ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [_hoisted_15, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.totalToPay = $event),\n    class: \"form-control\",\n    disabled: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.totalToPay]])])) : _createCommentVNode(\"v-if\", true), $data.showTotalToBuy ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [_hoisted_17, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.totalToBuy = $event),\n    class: \"form-control\",\n    disabled: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.totalToBuy]])])) : _createCommentVNode(\"v-if\", true), _hoisted_18, _hoisted_19, _createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n    onClick: _cache[7] || (_cache[7] = _withModifiers($event => $data.showModal = !$data.showModal, [\"prevent\"])),\n    class: \"btn btn-secondary mr-1 mb-2\"\n  }, \"CANCELAR\"), _createElementVNode(\"button\", {\n    disabled: $data.inputAmount != '' && parseFloat($data.inputAmount) < 50 || !$data.btnBuyActive,\n    class: \"btn btn-primary mr-1 mb-2\"\n  }, [_createElementVNode(\"b\", null, _toDisplayString($data.btnBuyLabel), 1 /* TEXT */)], 8 /* PROPS */, _hoisted_20)])], 32 /* NEED_HYDRATION */)])], 2 /* CLASS */)]);\n}","map":{"version":3,"names":["class","_createElementVNode","_hoisted_2","for","value","disabled","selected","key","_createElementBlock","_hoisted_1","onClick","_cache","$event","$data","showModal","_hoisted_3","_normalizeClass","$options","modalClass","_hoisted_4","_hoisted_5","_hoisted_6","onSubmit","_withModifiers","args","sendBuy","_hoisted_7","_hoisted_8","required","inputAmount","handleClickAmount","type","id","placeholder","_hoisted_9","_hoisted_10","selectedCoin","onChange","fetchCoinData","_hoisted_12","_Fragment","_renderList","coins","coin","name","code","_hoisted_13","_hoisted_11","showTotalToPay","_hoisted_14","_hoisted_15","totalToPay","_createCommentVNode","showTotalToBuy","_hoisted_16","_hoisted_17","totalToBuy","_hoisted_18","_hoisted_19","parseFloat","btnBuyActive","_toDisplayString","btnBuyLabel","_hoisted_20"],"sources":["/app/src/components/PageTransactionsCreate.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <button v-on:click=\"showModal = !showModal\" class=\"btn btn-primary mr-1 float-right\"><b>Nova Transação</b></button>\n    <div v-bind:class=\"modalClass\" class=\"modal-container\">\n      <div class=\"user-modal\">\n        <h3 class=\"text-primary\">COMPRAR MOEDA</h3>\n        <br>\n        <form @submit.prevent=\"sendBuy\">\n          <div class=\"form-group\">\n            <label for=\"quantity\">Quantidade que deseja comprar (mínino: 50,00)</label>\n            <input required v-model=\"inputAmount\" @click=\"handleClickAmount\" type=\"text\" id=\"amount\" class=\"form-control\" placeholder=\"R$ 0,00\"/>\n          </div>\n          <div class=\"form-group\">\n            <label for=\"name\">Selecione a moeda de compra</label>\n            <select v-model=\"selectedCoin\" @change=\"fetchCoinData\" :disabled=\"inputAmount < 50\">\n              <option value=\"\" disabled selected>Selecione uma moeda</option>\n              <option v-for=\"coin in coins\" :key=\"coin.name\" :value=\"coin.code\">{{ coin.name }}</option>\n            </select>\n          </div>\n          <div class=\"form-group\" v-if=\"showTotalToPay\">\n            <label for=\"totalToPay\">Valor total a pagar (incluindo taxa de serviço)</label>\n            <input type=\"text\" v-model=\"totalToPay\" class=\"form-control\" disabled>\n          </div>\n\n          <div class=\"form-group\" v-if=\"showTotalToBuy\">\n            <label for=\"totalToPay\">Você estará comprando:</label>\n            <input type=\"text\" v-model=\"totalToBuy\" class=\"form-control\" disabled>\n          </div>\n          <br><br>\n          <div>\n            <button v-on:click.prevent=\"showModal = !showModal\" class=\"btn btn-secondary mr-1 mb-2\">CANCELAR</button>\n            <button :disabled=\"(inputAmount != '' && parseFloat(inputAmount) < 50) || !btnBuyActive\" class=\"btn btn-primary mr-1 mb-2\"><b>{{ btnBuyLabel }}</b></button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'UserRegisterForm',\n    data() {\n      return {\n        users: [],\n        coins: [],\n        selectedCoin: '',\n        inputAmount: '',\n        totalToPay: '',\n        totalToBuy: '',\n        showModal: false,\n        showTotalToPay: false,\n        showTotalToBuy: false,\n        btnBuyActive: false,\n        btnBuyLabel: 'COMPRAR!',\n        token: sessionStorage.getItem('token')\n      };\n    },\n    mounted() {\n      this.fetchListCoin();\n    },\n    methods: {\n      handleClickAmount() {\n        this.isLoading = true;\n        this.selectedCoin = '';\n        this.btnBuyActive = false;\n        this.totalToPay = '';\n        this.totalToBuy = '';\n      },\n      // Requisição POST para criar um novo usuário\n      async fetchListCoin() {\n        try {\n          const response = await fetch('http://localhost:8000/api/coins', {\n            method: 'GET',\n            headers: {\n              'Authorization': this.token\n            }\n          });\n          if (response.ok) {\n            const data = await response.json();\n            this.coins = data.data;\n          } else {\n            console.error('Erro na requisição:', response.status);\n          }\n        } catch (error) {\n          console.error('Erro:', error.message);\n        }\n      },\n      async fetchCoinData() {\n        try {\n          if (this.inputAmount !== '') {\n            this.btnBuyLabel = 'CARREGANDO...';\n            const response = await fetch('http://localhost:8000/api/coins/price-rate', {\n              method: 'POST',\n              headers: {\n                'Content-type': 'application/json',\n                'Authorization': this.token\n              },\n              body: JSON.stringify({\n                amount: this.inputAmount,\n                coin: this.selectedCoin\n              })\n            });\n            if (response.ok) {\n              const data = await response.json();\n              this.showTotalToPay = true;\n              this.showTotalToBuy = true;\n              this.totalToPay = `BRL ${data.data.totalPayWithRate}`;\n              this.totalToBuy = `${data.data.shortName} ${data.data.totalBuy}`;\n              this.btnBuyLabel = 'COMPRAR!';\n              this.btnBuyActive = true;\n            } else {\n              this.totalToPay = '';\n              this.totalToBuy = '';\n              this.btnBuyActive = false;\n            }\n          }\n        } catch (error) {\n          console.error('Erro:', error.message);\n        }\n      },\n      async sendBuy() {\n        try {\n          this.btnBuyLabel = 'AGUARDE...';\n          this.btnBuyActive = false;\n          const response = await fetch('http://localhost:8000/api/transactions', {\n            method: 'POST',\n            headers: {\n              'Content-type': 'application/json',\n              'Authorization': this.token\n            },\n            body: JSON.stringify({\n              amount: this.inputAmount,\n              coin: this.selectedCoin\n            })\n          });\n          if (response.ok) {\n            window.location.reload();\n          } else {\n            console.error('Erro na requisição:', response.status);\n          }\n        } catch (error) {\n          console.error('Erro:', error.message);\n        }\n      }\n    },\n    computed: {\n      modalClass() {\n        return this.showModal ? 'show' : '';\n      }\n    }\n  };\n</script>\n\n<style>\n  .modal-container {\n    position: fixed;\n    background-color: rgba(0, 0, 0, 0.3);\n    top: 0;\n    left: 0;\n    height: 100vh;\n    width: 100vw;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    opacity: 0;\n    pointer-events: none;\n    transition: opacity 0.3s ease-in-out;\n  }\n\n  .modal-container.show {\n    opacity: 1;\n    pointer-events: auto;\n  }\n\n  .user-modal {\n    color: #535353;\n    background-color: #fff;\n    background-image: url(\"../assets/background.jpg\");\n    width: 450px;\n    padding: 40px 50px;\n    max-width: 100%;\n    border-radius: 10px;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n  }\n\n  .user-modal h1 {\n    margin: 0;\n  }\n\n  .user-modal p {\n    opacity: 0.9;\n  }\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}